<html>
  <head>
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type"/>
    <style>
    #result {
      max-width: 100vh;
      max-height: 100vh;
      border:1px solid black;
    }

    #result > svg {
      width: 100%;
      height: 100%;
    }
    </style>
  </head>
  <body>
    <script>
      // The `--no-modules`-generated JS from `wasm-bindgen` attempts to use
      // `WebAssembly.instantiateStreaming` to instantiate the wasm module,
      // but this doesn't work with `file://` urls. This example is frequently
      // viewed by simply opening `index.html` in a browser (with a `file://`
      // url), so it would fail if we were to call this function!
      //
      // Work around this for now by deleting the function to ensure that the
      // `no_modules.js` script doesn't have access to it. You won't need this
      // hack when deploying over HTTP.
      delete WebAssembly.instantiateStreaming;
    </script>

    <!-- this is the JS generated by the `wasm-bindgen` CLI tool -->
    <script src='./pi_collision_web.js'></script>

    <script>
      window.addEventListener('load', async () => {
          // the `wasm_bindgen` global is set to the exports of the Rust module
          //
          // here we tell bindgen the path to the wasm file so it can run
          // initialization and return to us a promise when it's done
          // also, we can use 'await' on the returned promise
          await wasm_bindgen('./pi_collision_web_bg.wasm');

          const render = s => {
            var mass = parseFloat(s);
            if (mass == mass) {
              document.getElementById('result').innerHTML = wasm_bindgen.gen_svg(mass);
            }
          };

          var input = document.getElementById('mass_input');
          input.addEventListener('input', e => {
            render(input.value);
          });
          render(input.value);



      });
    </script>

    <center>
      <input id="mass_input" type="text" value="3"></input>
      <div id="result"></div>
    </center>
  </body>
</html>
